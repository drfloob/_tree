{"version":3,"file":"dist/_tree.min.js","sources":["src/_tree.js"],"names":["root","factory","define","amd","exports","module","require","_tree","_","this","__callback","tree","event","args","Array","prototype","slice","call","arguments","each","defaults","callbacks","cb","partial","apply","__preFinalizeTree","mixins","mix","f","key","node","walk","visitNode","__setupAncestry","parent","__tree","__parent","children","c","__finalizeMutableTreeClone","Object","freeze","e","__children","__cloneDefaults","clone","__defaults","union","Tree","Node","inflate","obj","inflateMethod","create","byKey","Key","Obj","emit","has","byAdjacencyList","kids","tmpObj","i","first","length","isArray","push","onlyLeavesList","map","n","fromNode","Error","JSON","stringify","__root","nextNodeId","__id","__nextNodeId","uniqueId","defineProperties","value","writable","enumerable","configurable","__batch","newTree","_this","thisnode","Data","__data","Nodes","kidObj","kidTree","findNode","walkMethod","equals","found","findNodeByData","data","isMatch","keys","isUndefined","isObject","nodeData","isEqual","pick","Callback","startNode","tmpNode","qs","recurList","containsNode","queue","concat","recurse","queueRecurse","shift","dfpre","dfpost","bfpre","bfpost","rev","reverse","otherTree","someNode","containsData","someData","moveNode","movingNode","toParent","batch","remove","addChildNode","end","on","callback","off","without","mixin","contains","batchTree","isBatch","undefined","differentId","newNode","id","parseAndAddChild","childObj","childTree","newParentNode","nodeClone","otherNode","parNode","deleteRecursive","afterUpdate","beforeFreeze","beforeFreeze.data","beforeFreeze.parseAndAddChild","beforeFreeze.addChildNode","beforeFreeze.remove"],"mappings":"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"}